<!DOCTYPE html>
<html>
    <head>
        <title>Sum Page</title>
        <link rel="stylesheet" href="/stylesheets/AJAX.css">
    </head>
    <body>
        <div class="AJAXarea">
            <form class="inputForm" action="/" method="get">
                <label for="number">Number to Sum:</label>
                <input id="number" type="number" name="number" class="inputNum">
                <button type="submit">Submit</button>
            </form>
        </div>
        
        
        <script>
            const inputForm = document.querySelector('.inputForm');
            console.log(inputForm);
            inputForm.addEventListener('submit', (e)=>{
                e.preventDefault(); //prevent data send by form
                //retrieve data from form
                const inputName = document.querySelector('.inputNum').name;
                const inputVal = document.querySelector('.inputNum').value;
                //AJAX
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function(){
                    if(xhr.readyState===4 && xhr.status===200){
                        const AJAXarea = document.querySelector('.AJAXarea');
                        AJAXarea.classList.remove('AJAXarea');
                        AJAXarea.classList.add('AJAXresult');
                        AJAXarea.innerHTML = `<p>The sum result is: ${xhr.responseText}</p>`;
                    }
                }
                xhr.open('GET', `/data?${inputName}=${inputVal}`);
                xhr.send();
            })
        </script>
    </body>
</html>